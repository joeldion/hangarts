"use strict";const page=document.querySelector("html, body");let locationsBAM=[],locationsHP=[];const jsonDataFiles={HP:{fileURL:hpGlobals.hpJsonURL,locationsArray:locationsHP},BAM:{fileURL:hpGlobals.bamJsonURL,locationsArray:locationsBAM}};!function(e){for(let t in jsonDataFiles){let o=jsonDataFiles[t];e.getJSON(o.fileURL,(function(t){e.each(t,(function(e,t){o.locationsArray.push(t)}))}))}e(".scroll").on("click",(function(t){t.preventDefault();let o=e(this).data("target"),a=800,n=80;"#map"===o&&(a=1,n=350),e("html, body").animate({scrollTop:e(o).offset().top-n},a)}))}(jQuery),window.onload=function(){const e=document.querySelector(".header__video video");null!==e&&e.play();const t=document.getElementById("back-to-top");window.addEventListener("scroll",(function(){window.pageYOffset>800?t.classList.add("active"):t.classList.remove("active")})),t.addEventListener("click",(function(e){e.preventDefault(),window.scroll({top:0,left:0,behavior:"smooth"})}))},window.addEventListener("resize",(function(){setTimeout(initMap(),1e3)}),!0);let markerCategories={hp:!0,bam:!0};function initMap(){setTimeout((function(){let e=11;window.innerWidth<=900&&(e=10);const t={center:{lat:46.415525,lng:-72.969765},zoom:e,mapTypeId:"roadmap",mapTypeControl:!1,styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#124c3c"}]}],backgroundColor:"#fff"},o=new google.maps.Map(document.getElementById("map"),t);let a,n,l,s,i={data:locationsHP,icon:hpGlobals.iconURL+"icon-map-hangart.png",color:"#994488",suffix:"hp"},r={data:locationsBAM,icon:hpGlobals.iconURL+"icon-map-bam.png",color:"#124c3c",suffix:"bam"},c=[];markerCategories.hp&&c.push(i),markerCategories.bam&&c.push(r);for(let e in c){let t=c[e],i=t.icon;for(let e of t.data)a={position:new google.maps.LatLng(e.lat,e.lng),optimized:!1},n=new google.maps.Marker(a),n.setMap(o),n.setIcon(i),l=new google.maps.InfoWindow,function(e,a){google.maps.event.addListener(e,"click",(function(n){s="<div class='marker marker--"+t.suffix+"' style='width:150px;min-height:100px'>",s+="<h4 class='marker__title marker__title--"+t.suffix+"'>"+a.title+"</h4>",s+="<a class='marker__address' href='"+a.gmap+"' target='_blank'>"+a.address+"</a>",s+="<a class='marker__phone' href='tel:+1"+a.phone.replace(/\-|\s/g,"")+"'>"+a.phone+"</a>",s+="<a class='marker__website' href='"+a.website+"' target='_blank'>En savoir plus</a>",s+="</div>",l.setContent(s),l.open(o,e)}))}(n,e)}}))}const filters=document.querySelectorAll(".filter");for(let e=0;e<filters.length;e++)filters[e].addEventListener("click",(function(){let t=filters[e].dataset.cat,o=filters[e].querySelector(".filter__checkbox");markerCategories[t]?(markerCategories[t]=!1,o.classList.add("unchecked")):(markerCategories[t]=!0,o.classList.remove("unchecked")),initMap()}));